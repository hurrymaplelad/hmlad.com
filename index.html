<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>HurryMapleLad</title><meta name="author" content="Adam Hull" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta property="og:site_name" content="HurryMapleLad" /><meta property="og:url" content="http://hurrymaplelad.com/" /><link rel="icon" type="image/png" href="/favicon.png" /><link rel="stylesheet" href="/styles/main.css" /><link rel="alternate" title="HurryMapleLad" type="application/rss+xml" href="/rss.xml" /><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-35976996-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body><header><h1><a href="/">Hurry <br>Maple <br> Lad</a></h1></header><div id="main"><div id="content"><div class="blog-index"><article><header><h1 class="entry-title"><a href="/speed-up-your-responsive-app-with-node-and-varnish/">Speed up your Responsive App with Node and Varnish</a></h1><p class="meta"><time datetime="2014-09-30T19:00:00.000Z">September 30th, 2014</time></p></header><div class="entry-content undefined"><p>Conversations about responsive design often focus on the browser: media queries, grids, and the like, but there&#39;s more!  Creating a great experience on all sorts of consumer-grade doo-dads demands some work on the server.</p>
<p>On Good Eggs, shoppers with full-sized computers don&#39;t want all their grocery aisles hidden behind a collapsible menu. The markup to generate the desktop navigation is different enough from the mobile navigation that using media queries would be a stretch (heh, get it?).  By trimming the more complicated desktop markup from the mobile response, we save precious page weight for a faster load time.</p>
<p>Let&#39;s take a journey along the request-response cycle to illustrate how we send different responses to different devices while maximizing cache hits:</p>
<p><img src="/images/speed-up-your-responsive-app-with-node-and-varnish/flow.jpg" alt="Flow Diagram"></div><footer><a rel="full-article" href="/speed-up-your-responsive-app-with-node-and-varnish/">▨ More</a></footer></article><article><style scoped="scoped">img {
  max-width: 90%;
}
.right {
  float: right;
  margin-left: 1.5em;
}
.center {
  text-align: center;
  margin-bottom: 1em;
}
.clear {
  clear: both;
}</style><header><h1 class="entry-title"><a href="/mobile-page-load/">Loading Scripts in the Critical Path: A Commerce Case Study</a></h1><p class="meta"><time datetime="2014-06-16T19:00:00.000Z">June 16th, 2014</time></p></header><div class="entry-content undefined"><p>Starting javascript on DOMContentLoaded, a pattern <a href="https://docs.angularjs.org/guide/bootstrap">baked into</a> or <a href="http://backbonejs.org/docs/todos.html#section-2">recommended by</a> many frameworks, defers some work that could be done earlier.  There aren&#39;t many examples of what can be done early, or how to wire it up.  Here&#39;s how we did it on the Good Eggs mobile site.</div><footer><a rel="full-article" href="/mobile-page-load/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/a-better-food-system-phone-sized/">A Better Food System, Phone Sized</a></h1><p class="meta"><time datetime="2014-05-04T19:00:00.000Z">May 4th, 2014</time></p></header><div class="entry-content undefined"><p>We built a mobile site at Good Eggs.  Check it out by visiting <a href="http://goodeggs.com">goodeggs.com</a> on your phone.  In case you&#39;re not on a phone now, it looks kinda like this:</p>
<p><img src="/images/mobile-screenshot.jpg" alt="Screenshot"></p>
<p>Hopefully we made it a little easier to buy food from foodmakers living their dreams.  We had a good time making it, and we&#39;re chronicling the process with a series of <a href="http://bites.goodeggs.com/posts/good-eggs-goes-mobile/">blog posts</a>.  Follow along for the full story.</p>
</div></article><article><div class="entry-content undefined"><blockquote>
<p>When I dined with Mr. Gladstone, I felt as though he was the smartest
man in England. But when I dined with Mr. Disraeli, I felt as though
I was the smartest woman in England.</p>
</blockquote>
</div></article><article><style scoped="scoped">.dashboard-iphone p {
  text-align: justify;
}
.dashboard-iphone img {
  float: right;
  margin-left: 1em;
  max-width: 35%;
}
.dashboard-iphone .clear {
  clear: both;
}</style><header><h1 class="entry-title"><a href="/dashboard-iphone/">Automobile ♡ Smartphone</a></h1><p class="meta"><time datetime="2014-01-19T20:00:00.000Z">January 19th, 2014</time></p></header><div class="entry-content undefined"><p>Put an iPhone in the dash of an old Pathfinder on the cheap.</p>
<p><img src="/images/pathfinder/audio_schematic.thumb.jpg" alt="Audio wiring diagram">
Bless their hearts, auto-folks are trying to keep up with the tech world.  Lucklily, my 14 year old truck<sup>1</sup> was built before that started, so it was pretty easy to gut it&#39;s onboard entertainment and dock my phone instead.</p>
<p><sup>1 - Mechanics always call it a truck, whatever.</sup></p></div><footer><a rel="full-article" href="/dashboard-iphone/">▨ More</a></footer></article><article><style scoped="scoped">.by {
  margin-left: 10em;
}</style><header><h1 class="entry-title"><a href="/pg-and-the-epicureans/">PG and the Epicureans</a></h1><p class="meta"><time datetime="2013-09-02T19:00:00.000Z">September 2nd, 2013</time></p></header><div class="entry-content undefined"><blockquote>
<p>Don&#39;t fear god, <br/>
Don&#39;t worry about death; <br/>
What is good is easy to get, and <br/>
What is terrible is easy to endure</p>
</blockquote>
<p class="by"><a href="http://en.wikipedia.org/wiki/Tetrapharmakos#The_four-part_cure">Epicurus, 3XX BC</a></p>

<blockquote>
<p>Don&#39;t ignore your dreams; <br/>
Don&#39;t work too much; <br/>
Say what you think; <br/>
Cultivate friendships; <br/>
Be happy</p>
</blockquote>
  <p class="by"><a href="http://www.paulgraham.com/todo.html">Paul Graham, 2012</a></p>

<p>Stoicism is making a bit of a comeback in tech circles.  Folks find</div><footer><a rel="full-article" href="/pg-and-the-epicureans/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/fibrous-on-harmony-generators/">Fibrous on Harmony Generators? Impossible</a></h1><p class="meta"><time datetime="2013-08-17T19:00:00.000Z">August 17th, 2013</time></p></header><div class="entry-content undefined"><p>A good Friday afternoon chat about asynchronous programming models left me wondering if the fibrous API could be implemented on top of <a href="http://wiki.ecmascript.org/doku.php?id=harmony:generators">ES6 generators</a>. Generators are baked in to Node 0.11, Chrome 19, and Firefox.  A port would be a big boost to interoperability.  <a href="https://github.com/google/traceur-compiler">Traceur</a> can even transform generator based code into a <a href="http://traceur-compiler.googlecode.com/git/demo/repl.html#function*%20test%20()%20%7B%0A%20%20yield%201%3B%0A%20%20var%20a%20%3D%20yield%202%3B%0A%20%20try%20%7B%0A%20%20%20%20yield%20a%3B%0A%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20yield%2099%3B%0A%20%20%7D%0A%20%20for(var%20i%20%3D0%3B%20i%20%3C%201%3B%20i%2B%2B)%20%7B%0A%20%20%20%20yield%20123%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20normal()%20%7B%0A%20%20var%20a%20%3D%20b%3B%0A%20%20return%20b%3B%0A%7D">giant state machine</a> that runs on all of today&#39;s environments.</p>
<p>At first the port looked promising. Wikipedia claimed that general coroutines could be <a href="http://en.wikipedia.org/wiki/Coroutine#Comparison_with_generators">built on generators</a>, and many folks have <a href="http://taskjs.org/">done</a> <a href="https://gist.github.com/creationix/5762837">just</a> <a href="https://gist.github.com/Benvie/5667557">that</a>.  After a little noodling I&#39;m pretty sure it can&#39;t be done.  In a Harmony environment a function can only suspend execution at <code>yield</code> expressions and <code>yield</code> expressions can only appear in generator functions. A yield expression cannot be wrapped up behind a fibrous <code>sync</code> or <code>wait</code>.</p></div><footer><a rel="full-article" href="/fibrous-on-harmony-generators/">▨ More</a></footer></article><article><style scoped="scoped">.ids {
  width: 100%;
  margin-bottom: 30px;
  table-layout: fixed;
}

.ids th:first-child {
  font-size: 160%;
  padding-bottom: 20px;
  padding-top: 30px;
  font-weight: normal;
  width: 40%;
}

.ids th {
  font-weight: bold;
  width: 30%;
}</style><header><h1 class="entry-title"><a href="/ids-in-mongoose-json-and-backbone/">Ids in Mongoose, JSON, and Backbone</a></h1><p class="meta"><time datetime="2013-04-02T19:00:00.000Z">April 2nd, 2013</time></p></header><div class="entry-content undefined"><p>Mongoose adds <a href="http://mongoosejs.com/docs/guide.html#id">id sugar</a> on top the default _id document attribute.  Backbone has <a href="http://backbonejs.org/#Model-idAttribute">similar sugar</a>, but the types don&#39;t line up.  Pushing bits between the two with a customary JSON document adds a third representation.</p>
<p>If you find yourself typing <code>vegetable.id</code> when you really needed <code>new ObjectID(vegetable.toJSON()._id)</code> this fancy chart might help:</div><footer><a rel="full-article" href="/ids-in-mongoose-json-and-backbone/">▨ More</a></footer></article><article><div class="entry-content undefined"><blockquote>
<p>A breakthrough a day keeps the crisis at bay.</p>
<p><cite>E. F. Schumacher<br>
<a href="http://www.goodreads.com/book/show/1117634.Small_Is_Beautiful">Small is Beautiful</a></cite></p>
</blockquote>
</div></article><article><header><h1 class="entry-title"><a href="/restructuring-assignment-in-coffeescript/">Structuring Expressions in CoffeeScript</a></h1><p class="meta"><time datetime="2013-02-12T20:00:00.000Z">February 12th, 2013</time></p></header><div class="entry-content undefined"><p>CoffeeScript can save as many keystrokes putting objects together as it can taking them apart.</p>
<p class="update">
  For a while I was calling this lexeme <em>restructuring assignment</em> until some on Stack Overflow <a href="http://stackoverflow.com/a/14822198/407845">pointed out that name was ridiculous</a>.  Now I&#39;ve taken to the name <em>structuring expressions</em>.
</p></div><footer><a rel="full-article" href="/restructuring-assignment-in-coffeescript/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/teacup-released/">Teacup Released</a></h1><p class="meta"><time datetime="2013-01-09T20:00:00.000Z">January 9th, 2013</time></p></header><div class="entry-content undefined"><p><img src="https://raw.github.com/goodeggs/teacup/master/docs/teacup.jpg" alt="Teacup"></p>
<p>CoffeeScript templating from the Good Eggs labs:</p>
<ul>
<li><a href="http://bites.goodeggs.com/post/40042760798/teacup-coffeescript-templates-for-developer-happiness">Intro Post</a></li>
<li><a href="http://goodeggs.github.com/teacup/">Homepage</a></li>
<li><a href="http://github.com/goodeggs/teacup/">Source on Github</a></li>
</ul>
</div></article><article><header><h1 class="entry-title"><a href="/removing-a-property-from-a-mongoose-schema/">How to Remove a Property from a Mongoose.js Schema</a></h1><p class="meta"><time datetime="2012-11-03T19:00:00.000Z">November 3rd, 2012</time></p></header><div class="entry-content undefined"><p>This should be simple, but Mongoose really clings to data in existing documents.  I&#39;ll walk through all the ways I wanted it to work that failed.  We&#39;ll remove an <code>organic</code> flag from a toy <code>Food</code> model so we can replace it with <a href="http://www.nytimes.com/2012/10/14/opinion/sunday/bittman-my-dream-food-label.html">Bittman&#39;s dream label</a>.  If you just came for the solution, I arrived at:</p>
<pre><code class="js">Food.collection.update({},
  {$unset: {organic: <span class="hljs-literal">true</span>}},
  {multi: <span class="hljs-literal">true</span>, safe: <span class="hljs-literal">true</span>}
);</code></pre>

<p></div><footer><a rel="full-article" href="/removing-a-property-from-a-mongoose-schema/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/rotational-grazing/">Rotational Grazing</a></h1><p class="meta"><time datetime="2008-09-01T19:00:00.000Z">September 1st, 2008</time></p></header><div class="entry-content undefined"><div id="flash"></div>
<p>
Click and drag to fence in the sheep.
</p></div><footer><a rel="full-article" href="/rotational-grazing/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/isobots/">Robots in Isometric Projection</a></h1><p class="meta"><time datetime="2004-01-09T20:00:00.000Z">January 9th, 2004</time></p></header><div class="entry-content undefined"><div id="flash"></div>
<p>
You can move, but not very far.  You may aim.  Shooting is uncivilized.
</p></div><footer><a rel="full-article" href="/isobots/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/mini-golf/">Mini Golf</a></h1><p class="meta"><time datetime="2004-01-08T20:00:00.000Z">January 8th, 2004</time></p></header><div class="entry-content undefined"><div id="flash"></div>
<p>
Just three holes.  Aim with with mouse.  Click to putt.  Force ∝ distance from mouse to ball.  Sounds and title image plundered from the internet.
</p></div><footer><a rel="full-article" href="/mini-golf/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/pirates/">Pirates!</a></h1><p class="meta"><time datetime="2004-01-07T20:00:00.000Z">January 7th, 2004</time></p></header><div class="entry-content undefined"><div id="flash"></div>
<p>
  The turtle shaped rock is the only functioning dock.
</p></div><footer><a rel="full-article" href="/pirates/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/turtle-shootemup/">Turtle Shoot 'em Up</a></h1><p class="meta"><time datetime="2004-01-06T20:00:00.000Z">January 6th, 2004</time></p></header><div class="entry-content undefined"><div id="flash"></div>

<p>
Under the sea! Kinda fizzles after the whale rush…
</p></div><footer><a rel="full-article" href="/turtle-shootemup/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/throwing/">Throwing</a></h1><p class="meta"><time datetime="2004-01-05T20:00:00.000Z">January 5th, 2004</time></p></header><div class="entry-content undefined"><div id="flash"></div>
<table class="controls">
  <caption>Controls:</caption>
  <tr><th>Catch:</th><td>Click</td></tr>
  <tr><th>Throw:</th><td>Drag</td></tr>
</table></div><footer><a rel="full-article" href="/throwing/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/tank/">Tank</a></h1><p class="meta"><time datetime="2004-01-04T20:00:00.000Z">January 4th, 2004</time></p></header><div class="entry-content undefined"><div id="flash"></div>
<p>
From that semester on Newton and Photoshop filters.
</p></div><footer><a rel="full-article" href="/tank/">▨ More</a></footer></article><article><header><h1 class="entry-title"><a href="/tetris/">Tetris</a></h1><p class="meta"><time datetime="2004-01-03T20:00:00.000Z">January 3rd, 2004</time></p></header><div class="entry-content undefined"><div id="flash"></div>
<p>
In soviet highschool, tetris clones you.
</p></div><footer><a rel="full-article" href="/tetris/">▨ More</a></footer></article><div class="pagination"><a class="prev" href="/posts/2/">← Older</a><a href="/archives/">Archives</a></div></div></div></div><footer><p>by Adam Hull<a class="linkedin icon" href="http://www.linkedin.com/in/hurrymaplelad" target="_blank"></a><a class="goodreads icon" href="http://www.goodreads.com/hurrymaplelad" target="_blank"></a><a class="stackoverflow icon" href="http://stackoverflow.com/users/407845/hurrymaplelad" target="_blank"></a><a class="github icon" href="https://github.com/hurrymaplelad" target="_blank"></a></p></footer></body></html>