<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8" /><title>Structuring Expressions in CoffeeScript</title><meta name="author" content="Adam Hull" /><link rel="canonical" href="http://bites.goodeggs.com/post/41935904836/restructuring-assignment-in-coffeescript" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta property="og:title" content="Structuring Expressions in CoffeeScript" /><meta property="og:description" content=" CoffeeScript can save as many keystrokes putting objects together as it can taking them apart. 
 
  For a while I was calling this lexeme  restructuring assignment  until some on Stack Overflow  pointed out that name was ridiculous .  Now I've taken to the name  structuring expressions .
 

" /><meta property="og:site_name" content="HurryMapleLad" /><meta property="og:url" content="http://hurrymaplelad.com/restructuring-assignment-in-coffeescript/" /><link rel="icon" type="image/png" href="/favicon.png" /><link rel="stylesheet" href="/styles/main.css" /><link rel="alternate" title="HurryMapleLad" type="application/rss+xml" href="/rss.xml" /><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-35976996-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body><header><h1><a href="/">Hurry <br>Maple <br> Lad</a></h1></header><div id="main"><div id="content"><div><article class="hentry" role="article"><header><h1 class="entry-title">Structuring Expressions in CoffeeScript</h1><p class="meta"><time datetime="2013-02-12T00:00:00.000Z">February 12th, 2013</time></p><p class="meta canonical"><a href="http://bites.goodeggs.com/post/41935904836/restructuring-assignment-in-coffeescript" target="_blank">Crossposted from bites.goodeggs.com</a></p></header><div class="entry-content restructuring-assignment-in-coffeescript"><p>CoffeeScript can save as many keystrokes putting objects together as it can taking them apart.</p>
<p class="update">
  For a while I was calling this lexeme <em>restructuring assignment</em> until some on Stack Overflow <a href="http://stackoverflow.com/a/14822198/407845">pointed out that name was ridiculous</a>.  Now I&#39;ve taken to the name <em>structuring expressions</em>.
</p>

<!-- more -->

<p>Sure <a href="http://blog.carbonfive.com/2011/09/28/destructuring-assignment-in-coffeescript/">C5 told you all about</a> CoffeeScript’s <a href="http://coffeescript.org/#destructuring">destructing assignment</a> syntax for objects…</p>
<p>How it can reach deep into nested structures</p>
<pre class="highlighted"><code class="coffeescript">coffee&gt; user = name: <span class="string">'Foo'</span>, age: <span class="number">42</span>, address: { city: <span class="string">'Anytown'</span>, state:
<span class="string">'AL'</span> }
{ name: <span class="string">'Foo'</span>, age: <span class="number">42</span>, address: { city: <span class="string">'Anytown'</span>, state: <span class="string">'AL'</span> } }

coffee&gt; { address: { city, state } } = user
{ name: <span class="string">'Foo'</span>, age: <span class="number">42</span>, address: { city: <span class="string">'Anytown'</span>, state: <span class="string">'AL'</span> } }

coffee&gt; city
<span class="string">'Anytown'</span></code></pre>
<p>Or pluck apart function arguments</p>
<pre class="highlighted"><code class="coffeescript"><span class="function"><span class="title">displayName</span></span> = ({ name, age }) -&gt;
  console.log <span class="string">"<span class="subst">#{name}</span>, <span class="subst">#{age}</span> year(s) old"</span>

coffee&gt; displayName name: <span class="string">'Foo'</span>, age: <span class="number">42</span>
Foo, <span class="number">42</span> year(s) old</code></pre>
<p>Or even destructure directly to instance attributes</p>
<pre class="highlighted"><code class="coffeescript"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>
  constructor: ({ <span class="property">@name</span>, <span class="property">@age</span> }) -&gt;

coffee&gt; <span class="keyword">new</span> User(name: <span class="string">'Foo'</span>, age: <span class="number">42</span>)
{ name: <span class="string">'foo'</span>, age: <span class="number">42</span> }</code></pre>
<p>But what does this do?</p>
<pre class="highlighted"><code class="coffeescript">coffee&gt; age = <span class="number">42</span>
<span class="number">42</span>

coffee&gt; user = { <span class="string">'Foo'</span>, age }
?</code></pre>
<p>My fudge-fingers managed to mash that one unknowingly into my editor one day while attempting to rack up velocity points on the latest story. Instead of hemorrhaging the expected SyntaxError, it evaluated to this beautiful new object</p>
<pre class="highlighted"><code class="coffeescript">{ Foo: <span class="string">'Foo'</span>, age: <span class="number">42</span> }</code></pre>
<p>Now I’ve got a handy set syntax</p>
<pre class="highlighted"><code class="coffeescript">coffee&gt; <span class="number">2</span> <span class="keyword">of</span> { <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span> }
<span class="literal">true</span>

coffee&gt; <span class="number">2</span> <span class="keyword">of</span> { <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span> }
<span class="literal">false</span></code></pre>
<p>And with consistent variable naming, breezy data marshaling between some framework actors</p>
<pre class="highlighted"><code class="coffeescript"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>
  constructor: ({ <span class="property">@name</span>, <span class="property">@age</span> }) -&gt;

<span class="function"><span class="title">template</span></span> = ({ user, face }) -&gt;
  <span class="string">"&lt;div&gt;<span class="subst">#{user.name}</span> <span class="subst">#{face}</span>&lt;/div&gt;"</span>

<span class="class"><span class="keyword">class</span> <span class="title">UserView</span></span>
  constructor: ({ <span class="property">@user</span> }) -&gt;

  render: -&gt;
    <span class="property">@html</span> = template {
      <span class="property">@user</span>
      face: <span class="string">':)'</span>
    }

coffee&gt; user = <span class="keyword">new</span> User(name: <span class="string">'Foo'</span>, age: <span class="number">42</span>)
{ name: <span class="string">'Foo'</span>, age: <span class="number">42</span> }

coffee&gt; view = <span class="keyword">new</span> UserView {user}
{ user: { name: <span class="string">'Foo'</span>, age: <span class="number">42</span> } }

coffee&gt; view.render()
<span class="string">'&lt;div&gt;Foo :)&lt;/div&gt;'</span></code></pre>
</div><footer><p class="meta"><a class="basic-alignment left" href="/teacup-released/">&laquo; Teacup Released</a><a class="basic-alignment right" href="/a-breakthrough-a-day/">A Breakthrough a Day &raquo;</a></p></footer></article></div></div></div><footer><p>by Adam Hull<a class="linkedin icon" href="http://www.linkedin.com/in/hurrymaplelad" target="_blank"></a><a class="goodreads icon" href="http://www.goodreads.com/hurrymaplelad" target="_blank"></a><a class="stackoverflow icon" href="http://stackoverflow.com/users/407845/hurrymaplelad" target="_blank"></a><a class="github icon" href="https://github.com/hurrymaplelad" target="_blank"></a></p></footer></body></html>